<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PRO –ú–æ–Ω—Ç–∞–∂ (FREE)</title>
    <link rel="stylesheet" href="styles-free.css?v=1">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- FFmpeg.wasm –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ -->
    <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.11.6/dist/ffmpeg.min.js"></script>
</head>
<body>
    <div class="app-container" id="app">
        
        <!-- –≠–ö–†–ê–ù 1: –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ -->
        <div class="screen" id="screen-mode" data-screen="1">
            <h1 class="screen-title">üé¨ PRO –ú–æ–Ω—Ç–∞–∂</h1>
            <p class="hint-text">–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ</p>
            <div class="mode-buttons">
                <button class="mode-btn" onclick="selectMode('split_screen')">
                    <span class="mode-icon">üì±</span>
                    <span class="mode-label">–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞</span>
                    <span class="mode-desc">–î–≤–∞ –≤–∏–¥–µ–æ —Ä—è–¥–æ–º</span>
                </button>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 2: –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ -->
        <div class="screen hidden" id="screen-upload" data-screen="2">
            <h1 class="screen-title">üìπ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ</h1>
            <p class="hint-text">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Ç–æ—Ä–æ–µ –≤–∏–¥–µ–æ –¥–ª—è –º–æ–Ω—Ç–∞–∂–∞</p>
            
            <div class="upload-container">
                <input type="file" id="video-file" accept="video/*" style="display:none" onchange="handleVideoUpload(event)">
                <button class="upload-btn" onclick="document.getElementById('video-file').click()">
                    <span class="upload-icon">üì§</span>
                    <span class="upload-text">–í—ã–±—Ä–∞—Ç—å –≤–∏–¥–µ–æ</span>
                </button>
                <p class="upload-info" id="upload-info">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: MP4, MOV, AVI (–¥–æ 500 –ú–ë)</p>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div class="screen hidden" id="screen-settings" data-screen="3">
            <h1 class="screen-title" id="selected-mode-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
            
            <!-- –ü—Ä–µ–≤—å—é –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ -->
            <div class="composition-preview">
                <div class="comp-video comp-video-1" id="comp-video-1">
                    <div class="comp-placeholder">–í–∞—à–µ –≤–∏–¥–µ–æ</div>
                </div>
                <div class="comp-video comp-video-2" id="comp-video-2">
                    <div class="comp-placeholder">–ê–≤–∞—Ç–∞—Ä HeyGen</div>
                </div>
            </div>

            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ -->
            <div class="settings-panel">
                <div class="setting-group">
                    <div class="setting-header" onclick="toggleGroup('main-settings')">
                        <span class="toggle-icon" id="toggle-main-settings">‚ñº</span>
                        <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏</span>
                    </div>
                    <div class="setting-content" id="main-settings">
                        <div class="setting-item">
                            <label class="setting-label">–ü–æ–∑–∏—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∞:</label>
                            <select class="setting-select" id="avatar-position" onchange="updateState('avatarPosition', this.value)">
                                <option value="top">–°–≤–µ—Ä—Ö—É</option>
                                <option value="bottom">–°–Ω–∏–∑—É</option>
                                <option value="left">–°–ª–µ–≤–∞</option>
                                <option value="right">–°–ø—Ä–∞–≤–∞</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label">
                                –†–∞–∑–º–µ—Ä –∞–≤–∞—Ç–∞—Ä–∞: <span id="screen-value">50</span>%
                            </label>
                            <input type="range" class="setting-slider" id="screen-ratio" 
                                   min="20" max="80" value="50" 
                                   oninput="updateSlider('screen', this.value)">
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="action-btn" onclick="startProcessing()">
                üöÄ –°–æ–∑–¥–∞—Ç—å –≤–∏–¥–µ–æ
            </button>
            <p class="hint-text">üí° –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–π–º—ë—Ç 1-3 –º–∏–Ω—É—Ç—ã</p>
        </div>

        <!-- –≠–ö–†–ê–ù 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ -->
        <div class="screen hidden" id="screen-processing" data-screen="4">
            <h1 class="screen-title">‚è≥ –û–±—Ä–∞–±–æ—Ç–∫–∞</h1>
            <div class="processing-container">
                <div class="spinner"></div>
                <p class="processing-status" id="processing-status">–ó–∞–≥—Ä—É–∑–∫–∞ FFmpeg...</p>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
                <p class="progress-text" id="progress-text">0%</p>
                <p class="hint-text">–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä—è–º–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ</p>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 5: –†–µ–∑—É–ª—å—Ç–∞—Ç -->
        <div class="screen hidden" id="screen-result" data-screen="5">
            <h1 class="screen-title">‚úÖ –ì–æ—Ç–æ–≤–æ!</h1>
            <div class="result-container">
                <div class="result-icon">üéâ</div>
                <p class="result-text">–í–∞—à–µ –≤–∏–¥–µ–æ –≥–æ—Ç–æ–≤–æ!</p>
                <video class="result-preview" id="result-preview" controls></video>
                <button class="download-btn" id="download-btn" onclick="downloadVideo()">
                    üì• –°–∫–∞—á–∞—Ç—å –≤–∏–¥–µ–æ
                </button>
                <button class="action-btn secondary" onclick="resetApp()">
                    üîÑ –°–æ–∑–¥–∞—Ç—å –µ—â—ë –æ–¥–Ω–æ
                </button>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 6: –û—à–∏–±–∫–∞ -->
        <div class="screen hidden" id="screen-error" data-screen="6">
            <h1 class="screen-title">‚ùå –û—à–∏–±–∫–∞</h1>
            <div class="error-container">
                <div class="error-icon">üòî</div>
                <p class="error-text" id="error-text">–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ</p>
                <button class="action-btn" onclick="resetApp()">
                    üîô –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                </button>
            </div>
        </div>

    </div>

    <script src="script-free.js?v=1"></script>
</body>
</html>


